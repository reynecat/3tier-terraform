# aws/terraform.tfvars (Plan B - Pilot Light)

# =================================================
# 기본 설정
# =================================================

environment = "blue"
aws_region  = "ap-northeast-2"

# =================================================
# 도메인 설정 (도메인 없이 사용)
# =================================================

enable_custom_domain = false
domain_name          = ""
create_hosted_zone   = false

# =================================================
# Azure 연동 (Blob Storage 백업용)
# =================================================

azure_storage_account_name  = "" 
azure_storage_account_key   = "YOUR_AZURE_STORAGE_KEY"  # Azure에서 생성 후 입력
azure_backup_container_name = "mysql-backups"
azure_tenant_id             = "YOUR_TENANT_ID"
azure_subscription_id       = "YOUR_SUBSCRIPTION_ID"

# =================================================
# 백업 인스턴스 설정
# =================================================

enable_backup_instance = true
backup_instance_ssh_public_key = "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC... your-email@example.com"

# =================================================
# 데이터베이스 설정
# =================================================

db_name     = "petclinic"
db_username = "admin"
# db_password는 terraform apply 시 입력하거나 환경변수 사용
# export TF_VAR_db_password="your-password"

# =================================================
# VPC 설정
# =================================================

aws_vpc_cidr = "10.0.0.0/16"

aws_availability_zones = [
  "ap-northeast-2a",
  "ap-northeast-2c"
]

public_subnet_cidrs = ["10.0.1.0/24", "10.0.2.0/24"]
web_subnet_cidrs    = ["10.0.11.0/24", "10.0.12.0/24"]
was_subnet_cidrs    = ["10.0.21.0/24", "10.0.22.0/24"]
rds_subnet_cidrs    = ["10.0.31.0/24", "10.0.32.0/24"]

# =================================================
# EKS 노드 설정
# =================================================

eks_node_instance_type = "t3.small"
eks_web_desired_size   = 2
eks_web_min_size       = 1
eks_web_max_size       = 4
eks_was_desired_size   = 2
eks_was_min_size       = 1
eks_was_max_size       = 4

# =================================================
# RDS 설정
# =================================================

rds_instance_class        = "db.t3.medium"
rds_allocated_storage     = 100
rds_max_allocated_storage = 200
rds_multi_az              = true
rds_backup_retention      = 7
rds_deletion_protection   = false
rds_skip_final_snapshot   = true


# Route53 설정
enable_custom_domain = true
domain_name          = "your-domain.com"  # 실제 도메인으로 변경
create_hosted_zone   = true
